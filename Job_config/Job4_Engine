resources:
  jobs:
    Runner_DQ:
      name: Runner_DQ
      max_concurrent_runs: 2
      tasks:
        - task_key: run_validations
          notebook_task:
            notebook_path: engine/02_dq_runner
            source: GIT
          existing_cluster_id: 0930-095114-2rtwrrav
        - task_key: Unify
          depends_on:
            - task_key: run_validations
          notebook_task:
            notebook_path: utils/03_unify_evidences
            source: GIT
          existing_cluster_id: 0930-095114-2rtwrrav
        - task_key: calculate_persistence
          depends_on:
            - task_key: Unify
          notebook_task:
            notebook_path: utils/04_calculate_persistence
            source: GIT
          existing_cluster_id: 0930-095114-2rtwrrav
      git_source:
        git_url: https://github.com/CAF-I-D/dp_datagovernance-data_quality.git
        git_provider: gitHub
        git_branch: main
      queue:
        enabled: true
      parameters:
        - name: catalog_name
          default: sap_databricks_sdg
        - name: schema_name
          default: framework_dq
        - name: table_name
          default: ""
      environments:
        - environment_key: calculate_persistence_environment
          spec:
            environment_version: "1"
        - environment_key: engine_environment
          spec:
            environment_version: "1"
